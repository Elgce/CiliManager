"use strict";(self["webpackChunkbmi_hw"]=self["webpackChunkbmi_hw"]||[]).push([[203],{2203:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var l=a(3396),i=a(7139);const n=e=>((0,l.dD)("data-v-0f3fadc7"),e=e(),(0,l.Cn)(),e),o=(0,l.Uk)("新增活动"),s={key:1},d={class:"table-header"},u={class:"title"},c={class:"inline-editor"},r={title:"name",class:"inline-editor-txt"},_={class:"id-txt"},p={class:"op"},m=n((()=>(0,l._)("span",null,"活动详情",-1))),h=["onClick"],y=n((()=>(0,l._)("span",null,"活动编辑",-1))),w=n((()=>(0,l._)("span",null,"活动删除",-1))),g=(0,l.Uk)("活动详情"),v=(0,l.Uk)("活动编辑"),f=(0,l.Uk)("活动删除"),b={class:"demo-date-picker"},A={class:"block"},W=(0,l.Uk)("公益活动"),k=(0,l.Uk)("研学活动"),V=(0,l.Uk)("上传图片"),S={class:"demo-date-picker"},C={class:"block"},U=(0,l.Uk)("公益活动"),I=(0,l.Uk)("研学活动"),z=(0,l.Uk)("上传图片"),D={class:"dialog-footer"},M=(0,l.Uk)("取消"),q=(0,l.Uk)("确定");function j(e,t,a,n,j,x){const G=(0,l.up)("el-button"),N=(0,l.up)("el-col"),T=(0,l.up)("el-option"),E=(0,l.up)("el-select"),H=(0,l.up)("el-input"),O=(0,l.up)("el-row"),P=(0,l.up)("el-empty"),J=(0,l.up)("el-divider"),$=(0,l.up)("DocumentAdd"),K=(0,l.up)("el-icon"),Y=(0,l.up)("Edit"),Z=(0,l.up)("Delete"),B=(0,l.up)("el-descriptions-item"),F=(0,l.up)("el-descriptions"),L=(0,l.up)("el-pagination"),Q=(0,l.up)("el-form-item"),R=(0,l.up)("el-date-picker"),X=(0,l.up)("el-radio-button"),ee=(0,l.up)("el-radio-group"),te=(0,l.up)("el-checkbox"),ae=(0,l.up)("Upload"),le=(0,l.up)("el-form"),ie=(0,l.up)("el-dialog"),ne=(0,l.up)("el-main"),oe=(0,l.up)("el-container");return(0,l.wg)(),(0,l.j4)(oe,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ne,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N,{span:2},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{type:"primary",onClick:x.tocreate},{default:(0,l.w5)((()=>[o])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(N,{span:3,offset:14},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e),class:"m-2",placeholder:"全部活动",onChange:x.Search},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(j.options,(e=>((0,l.wg)(),(0,l.j4)(T,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,l.Wm)(N,{span:5},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{modelValue:j.input,"onUpdate:modelValue":t[1]||(t[1]=e=>j.input=e),class:"w-50 m-2",placeholder:"输入活动名称","prefix-icon":"Search",onChange:x.Search},null,8,["modelValue","onChange"])])),_:1})])),_:1}),"open"==j.value||0==j.data_num?((0,l.wg)(),(0,l.j4)(P,{key:0,"image-size":250,description:"空空如也"})):(0,l.kq)("",!0),"open"!=j.value?((0,l.wg)(),(0,l.iD)("div",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(j.MessageShow,(t=>((0,l.wg)(),(0,l.iD)("div",{key:t.name},[(0,l.Wm)(J,{class:"between","border-style":"none"}),(0,l._)("div",d,[(0,l._)("div",u,[(0,l._)("span",c,[(0,l._)("span",r,(0,i.zw)(t["name"]),1)]),(0,l._)("span",_,"活动ID:"+(0,i.zw)(t["id"]),1)]),(0,l._)("div",p,[(0,l.Wm)(G,{class:"op-item",link:"",onClick:e=>x.call_activity_detail(t.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)($)])),_:1}),m])),_:2},1032,["onClick"]),(0,l._)("span",{class:"op-item",link:"",onClick:a=>e.call_acitivity_edit(t.id)},[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Y)])),_:1}),y],8,h),(0,l.Wm)(G,{class:"op-item",link:"",onClick:e=>x.call_activity_delete(t.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Z)])),_:1}),w])),_:2},1032,["onClick"])])]),(0,l.Wm)(F,{direction:"vertical",column:8,size:"large",border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{label:"活动ID"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t["id"]),1)])),_:2},1024),(0,l.Wm)(B,{label:"开始日期"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t["begin_date"]),1)])),_:2},1024),(0,l.Wm)(B,{label:"结束日期"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t["end_date"]),1)])),_:2},1024),(0,l.Wm)(B,{label:"活动类型"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t["specy"]),1)])),_:2},1024),(0,l.Wm)(B,{label:"操作"},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{type:"primary",link:"",key:"label",onClick:e=>x.call_activity_detail(t.id)},{default:(0,l.w5)((()=>[g])),_:2},1032,["onClick"]),(0,l.Wm)(G,{type:"primary",link:"",key:"label",onClick:e=>x.call_activity_edit(t.id)},{default:(0,l.w5)((()=>[v])),_:2},1032,["onClick"]),(0,l.Wm)(G,{type:"primary",link:"",key:"delete",onClick:e=>x.call_activity_delete(t.id)},{default:(0,l.w5)((()=>[f])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(J,{class:"between","border-style":"none"})])))),128))])):(0,l.kq)("",!0),(0,l.Wm)(J,{class:"lower","border-style":"none"}),"open"!=j.value&&0!=j.data_num?((0,l.wg)(),(0,l.j4)(L,{key:2,currentPage:j.queryInfo.pagenum,"onUpdate:currentPage":t[2]||(t[2]=e=>j.queryInfo.pagenum=e),"page-size":j.queryInfo.pagesize,"onUpdate:page-size":t[3]||(t[3]=e=>j.queryInfo.pagesize=e),"page-sizes":[1,2,3,4,5],background:j.background,layout:"total, sizes, prev, pager, next, jumper",total:j.data_num,onSizeChange:x.handleSizeChange,onCurrentChange:x.handleCurrentChange,id:"pagination"},null,8,["currentPage","page-size","background","total","onSizeChange","onCurrentChange"])):(0,l.kq)("",!0),(0,l.Wm)(ie,{title:"活动详情",modelValue:j.ActivityDetailVisible,"onUpdate:modelValue":t[11]||(t[11]=e=>j.ActivityDetailVisible=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{model:e.form,"label-width":"120px",style:{"max-width":"650px"},disabled:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{label:"活动名称"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{id:"input_name",modelValue:j.showActivity_Name,"onUpdate:modelValue":t[4]||(t[4]=e=>j.showActivity_Name=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(Q,{label:"活动Id"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{id:"input_id",modelValue:j.showActivity_Id,"onUpdate:modelValue":t[5]||(t[5]=e=>j.showActivity_Id=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(Q,{label:"活动时间"},{default:(0,l.w5)((()=>[(0,l._)("div",b,[(0,l._)("div",A,[(0,l.Wm)(R,{modelValue:j.showActivity_Date,"onUpdate:modelValue":t[6]||(t[6]=e=>j.showActivity_Date=e),type:"daterange","unlink-panels":"","range-separator":"To",shortcuts:e.shortcuts,size:e.size},null,8,["modelValue","shortcuts","size"])])])])),_:1}),(0,l.Wm)(Q,{label:"活动类型"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{id:"data_type",modelValue:j.showActivity_Specy,"onUpdate:modelValue":t[7]||(t[7]=e=>j.showActivity_Specy=e),color:"blue"},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{name:"data_type",value:"charity",label:"charity"},{default:(0,l.w5)((()=>[W])),_:1}),(0,l.Wm)(X,{name:"data_type",value:"learn",label:"learn"},{default:(0,l.w5)((()=>[k])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(Q,{label:"活动人数"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(te,{modelValue:j.showActivity_Single_Sign,"onUpdate:modelValue":t[8]||(t[8]=e=>j.showActivity_Single_Sign=e),label:"单人报名"},null,8,["modelValue"]),(0,l.Wm)(te,{modelValue:j.showActivity_Group_Sign,"onUpdate:modelValue":t[9]||(t[9]=e=>j.showActivity_Group_Sign=e),label:"团体报名"},null,8,["modelValue"])])])),_:1}),(0,l.Wm)(Q,{label:"活动图片"},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{id:"uploader_pic",type:"primary",onClick:e.call_diagram_pic},{default:(0,l.w5)((()=>[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ae)])),_:1}),V])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(Q,{label:"活动详情"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{modelValue:j.showActivity_Description,"onUpdate:modelValue":t[10]||(t[10]=e=>j.showActivity_Description=e),autosize:"",type:"textarea",placeholder:"请输入活动描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,l.Wm)(ie,{title:"活动编辑",modelValue:j.ActivityEditVisible,"onUpdate:modelValue":t[21]||(t[21]=e=>j.ActivityEditVisible=e)},{footer:(0,l.w5)((()=>[(0,l._)("span",D,[(0,l.Wm)(G,{onClick:t[19]||(t[19]=e=>j.ActivityEditVisible=!1)},{default:(0,l.w5)((()=>[M])),_:1}),(0,l.Wm)(G,{id:"push_file",type:"primary",onClick:t[20]||(t[20]=e=>x.activity_edit(this.showActivity_Id))},{default:(0,l.w5)((()=>[q])),_:1})])])),default:(0,l.w5)((()=>[(0,l.Wm)(le,{model:e.form,"label-width":"120px",style:{"max-width":"650px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{label:"活动名称"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{id:"input_name",modelValue:j.showActivity_Name,"onUpdate:modelValue":t[12]||(t[12]=e=>j.showActivity_Name=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(Q,{label:"活动Id"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{id:"input_id",modelValue:j.showActivity_Id,"onUpdate:modelValue":t[13]||(t[13]=e=>j.showActivity_Id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(Q,{label:"活动时间"},{default:(0,l.w5)((()=>[(0,l._)("div",S,[(0,l._)("div",C,[(0,l.Wm)(R,{modelValue:j.showActivity_Date,"onUpdate:modelValue":t[14]||(t[14]=e=>j.showActivity_Date=e),type:"daterange","unlink-panels":"","range-separator":"To",shortcuts:e.shortcuts,size:e.size},null,8,["modelValue","shortcuts","size"])])])])),_:1}),(0,l.Wm)(Q,{label:"活动类型"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{id:"data_type",modelValue:j.showActivity_Specy,"onUpdate:modelValue":t[15]||(t[15]=e=>j.showActivity_Specy=e),color:"blue"},{default:(0,l.w5)((()=>[(0,l.Wm)(X,{name:"data_type",value:"charity",label:"charity"},{default:(0,l.w5)((()=>[U])),_:1}),(0,l.Wm)(X,{name:"data_type",value:"learn",label:"learn"},{default:(0,l.w5)((()=>[I])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(Q,{label:"活动人数"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(te,{modelValue:j.showActivity_Single_Sign,"onUpdate:modelValue":t[16]||(t[16]=e=>j.showActivity_Single_Sign=e),label:"单人报名"},null,8,["modelValue"]),(0,l.Wm)(te,{modelValue:j.showActivity_Group_Sign,"onUpdate:modelValue":t[17]||(t[17]=e=>j.showActivity_Group_Sign=e),label:"团体报名"},null,8,["modelValue"])])])),_:1}),(0,l.Wm)(Q,{label:"活动图片"},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{id:"uploader_pic",type:"primary",onClick:e.call_diagram_pic},{default:(0,l.w5)((()=>[(0,l.Wm)(K,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ae)])),_:1}),z])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(Q,{label:"活动详情"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{modelValue:j.showActivity_Description,"onUpdate:modelValue":t[18]||(t[18]=e=>j.showActivity_Description=e),autosize:"",type:"textarea",placeholder:"请输入活动描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var x=a(4870),G={name:"ManageDateSet",components:{},data(){return{showActivity_Name:"alala~",showActivity_Date:["2022/11/23","2022/12/01"],showActivity_Specy:"charity",showActivity_Id:"100001",showActivity_Description:"我是谁？",showActivity_Single_Sign:!0,showActivity_Group_Sign:!1,ActivityDetailVisible:!1,ActivityEditVisible:!1,background:(0,x.iH)(!0),queryInfo:{query:"",pagenum:1,pagesize:2},data_num:-1,authority:-1,value:(0,x.iH)(""),input:(0,x.iH)(""),new_name:(0,x.iH)(""),MessageInfo:(0,x.qj)({charity1:{name:"人界地理",begin_date:"2022/11/23",end_date:"2022/12/01",specy:"charity",id:"100001"},learn1:{name:"人格什么么",begin_date:"2022/11/14",end_date:"2022/12/31",specy:"learn",id:"100002"}}),MessageShow:(0,x.qj)({}),MessageArray:(0,x.qj)([]),options:[{value:"allact",label:"全部活动"},{value:"charity",label:"公益活动"},{value:"learn",label:"研学活动"}]}},methods:{call_activity_detail(e){let t=this,a={id:parseInt(e)};return fetch("/api/activity/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json)).then((e=>{t.showActivity_Name=e.title,t.showActivity_Description=e.content;let a=e.num;t.showActivity_Group_Sign=!1,t.showActivity_Single_Sign=!1,1==a?t.showActivity_Single_Sign=!0:2==a?t.showActivity_Group_Sign=!0:3==a?(t.showActivity_Single_Sign=!0,t.showActivity_Group_Sign=!0):console.log("error!"),t.showActivity_Date=[e.begin_date,e.end_date],t.showActivity_Id=e.id,t.showActivity_Specy=e.specy,t.ActivityDetailVisible=!0}))},tocreate(){this.$router.push({name:"新建活动"})},Search(){this.data_num=0;const e={name:this.input};let t=this.value;"charity"==t?t="公益活动":"learn"==t&&(t="研学活动");let a=this;a.MessageArray=(0,x.qj)([]);for(let l in a.MessageInfo)a.MessageInfo[l]["name"].search(e["name"])||"allact"!=t&&t!=a.MessageInfo[l]["specy"]||(a.MessageArray.push(l),this.data_num+=1);this.handleCurrentChange(1)},get_data(){this.data_num=2;let e=this;fetch("/api/activity/getall").then((t=>t.json().then((t=>{e.MessageInfo=t.MessageInfo,e.MessageArray=(0,x.qj)([]);for(let a in e.MessageInfo)e.MessageArray.push(a),"learn"==e.MessageInfo[a]["specy"]?e.MessageInfo[a]["specy"]="研学活动":"charity"==e.MessageInfo[a]["specy"]&&(e.MessageInfo[a]["specy"]="公益活动");this.handleCurrentChange(1)}))))},handleSizeChange(e){this.queryInfo.pagesize=e,this.handleCurrentChange(1)},handleCurrentChange(e){this.queryInfo.pagenum=e;let t=(this.queryInfo.pagenum-1)*this.queryInfo.pagesize,a=t+this.queryInfo.pagesize;this.MessageArray.length<a&&(a=this.MessageArray.length),this.MessageShow=(0,x.qj)({});for(let l=t;l<a;l++)this.MessageShow[this.MessageArray[l]]=this.MessageInfo[this.MessageArray[l]]},setvalue(){this.value=this.options[0].value},call_activity_delete(e){let t=this;const a={id:parseInt(e)};return fetch("/api/activity/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((()=>{t.data_num>0&&(t.data_num=t.data_num-1),this.$router.push("/index/activities/blank")}))},call_activity_edit(){this.ActivityEditVisible=!0},activity_edit(e){let t=0;this.showActivity_Single_Sign?t=1:this.showActivity_Group_Sign&&(t=2),this.showActivity_Group_Sign&&this.showActivity_Single_Sign&&(t=3);let a={id:e,title:this.showActivity_Name,content:this.showActivity_Description,begin_date:this.showActivity_Date[0],end_date:this.showActivity_Date[1],num:t,specy:this.showActivity_Specy};return this.ActivityEditVisible=!1,fetch("/api/activity/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((()=>{this.$router.push("/index/activities/blank")}))},get_authority(){this.authority=0}},created(){this.setvalue(),this.get_authority(),this.get_data()}},N=a(89);const T=(0,N.Z)(G,[["render",j],["__scopeId","data-v-0f3fadc7"]]);var E=T}}]);
//# sourceMappingURL=203.3ab86898.js.map