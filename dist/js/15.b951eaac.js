"use strict";(self["webpackChunkbmi_hw"]=self["webpackChunkbmi_hw"]||[]).push([[15],{8015:function(e,l,t){t.r(l),t.d(l,{default:function(){return b}});var i=t(3396);const a=e=>((0,i.dD)("data-v-3f69746a"),e=e(),(0,i.Cn)(),e),n=(0,i.Uk)("上传图片"),o=a((()=>(0,i._)("div",{class:"el-upload__text"},[(0,i.Uk)(" 将图片拖拽到此处 或 "),(0,i._)("em",null,"点击上传图片")],-1))),u=a((()=>(0,i._)("div",{class:"el-upload__tip"}," 上传图片大小请小于200kb ",-1))),d={class:"dialog-footer"},p=(0,i.Uk)("取消"),r=(0,i.Uk)("确定"),s=(0,i.Uk)("发布公告"),c=(0,i.Uk)("暂存草稿"),m=(0,i.Uk)("取消");function f(e,l,t,a,f,_){const h=(0,i.up)("el-input"),w=(0,i.up)("el-form-item"),g=(0,i.up)("Upload"),b=(0,i.up)("el-icon"),k=(0,i.up)("el-button"),W=(0,i.up)("el-divider"),U=(0,i.up)("el-alert"),V=(0,i.up)("upload-filled"),C=(0,i.up)("el-upload"),x=(0,i.up)("el-dialog"),y=(0,i.up)("el-form"),v=(0,i.up)("el-row"),S=(0,i.up)("el-main"),j=(0,i.up)("el-container");return(0,i.wg)(),(0,i.j4)(j,null,{default:(0,i.w5)((()=>[(0,i.Wm)(S,null,{default:(0,i.w5)((()=>[(0,i.Wm)(y,{model:a.form,"label-width":"120px",style:{"max-width":"650px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{label:"公告标题"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{id:"input_name",modelValue:a.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.form.name=e),placeholder:"限制50个字符以内(支持汉字、英文大小写、数字及下划线，下划线不能作为开头)"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(w,{label:"公告内容"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{modelValue:a.form.discriptxt,"onUpdate:modelValue":l[1]||(l[1]=e=>a.form.discriptxt=e),autosize:{minRows:4},type:"textarea",placeholder:"请输入公告内容"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(w,{label:"上传图片"},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{id:"uploader_pic",type:"primary",onClick:_.call_diagram_pic},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g)])),_:1}),n])),_:1},8,["onClick"])])),_:1}),(0,i.Wm)(x,{title:"上传图片",modelValue:f.picUpVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>f.picUpVisible=e)},{footer:(0,i.w5)((()=>[(0,i._)("span",d,[(0,i.Wm)(k,{onClick:l[2]||(l[2]=e=>f.picUpVisible=!1)},{default:(0,i.w5)((()=>[p])),_:1}),(0,i.Wm)(k,{id:"push_file",type:"primary",onClick:l[3]||(l[3]=e=>f.picUpVisible=!1)},{default:(0,i.w5)((()=>[r])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(W,{id:"divider_dialog"}),(0,i.Wm)(U,{id:"explanation_p",title:"请上传需要的图片",type:"warning",closable:!1}),(0,i.Wm)(C,{class:"upload-demo",drag:"",action:"/api/call",multiple:""},{tip:(0,i.w5)((()=>[u])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"el-icon--upload"},{default:(0,i.w5)((()=>[(0,i.Wm)(V)])),_:1}),o])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["model"]),(0,i.Wm)(v,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{type:"success",onClick:_.create_announce},{default:(0,i.w5)((()=>[s])),_:1},8,["onClick"]),(0,i.Wm)(k,{type:"info",onClick:_.draft_annouce},{default:(0,i.w5)((()=>[c])),_:1},8,["onClick"]),(0,i.Wm)(k,{type:"warning",onClick:_.cancel},{default:(0,i.w5)((()=>[m])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}var _=t(4870),h={components:{},data(){return{picUpVisible:!1}},setup(){let e=(0,_.qj)({name:"",discriptxt:(0,_.iH)("")}),l=!0;return{form:e,is_publish:l}},methods:{isfull(){let e=this.form,l=""!=e.name&&""!=e.discriptxt;return l||alert("请将表单内容填写完整！"),l},gettime(){let e=new Date,l=e.getFullYear(),t=e.getMonth(),i=e.getDate(),a=e.getHours(),n=e.getMinutes(),o=e.getSeconds(),u=String(l)+"-"+String(t)+"-"+String(i)+" "+String(a)+":"+String(n)+":"+String(o);return print(u),u},create_announce(){if(this.isfull()){let e=this.form["name"],l=this.form["descriptxt"],t=this.gettime();const i={title:e,content:l,datetime:t,is_publish:this.is_publish};return console.log(i),fetch("/api/adddata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>e.json())).then((()=>{this.$router.push("/index/announcement/view")}))}},draft_annouce(){this.is_publish=!1,this.create_announce()},cancel(){this.$router.push("/index/announcement/view")},call_diagram_pic(){this.picUpVisible=!0}}},w=t(89);const g=(0,w.Z)(h,[["render",f],["__scopeId","data-v-3f69746a"]]);var b=g}}]);
//# sourceMappingURL=15.b951eaac.js.map